Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2018-04-20T15:22:44+08:00

====== 磁盘分区 ======
Created 星期五 20 四月 2018

====== 磁盘编号 ======
是根据加载的顺序按a,b,cd...顺序来命名的。如sda,sdb ,sdc

===== 分区表类型 =====
两种格式。
磁盘的扇区大小分为512BYTEs与4kBytes两种。磁盘的第一个扇区特别的重要，因为他记录了整颗磁盘的重要信息！ 早期磁
盘第一个扇区里面含有的重要信息我们称为MBR （Master Boot Record） 格式,但是由于近年来磁盘的容量不断扩大，造成读写上
的一些困扰， 甚至有些大于 2TB 以上的磁盘分区已经让某些操作系统无法存取。因此后来又多了一个新的磁盘分区格式，称为
GPT （GUID partition table）

===== MBR =====
主要开机记录区（Master Boot Record, MBR）：可以安装开机管理程序的地方，有446 Bytes
分区表（partition table）：记录整颗硬盘分区的状态，有64 Bytes
由于分区表所在区块仅有64 Bytes容量，因此最多仅能有四组记录区，每组记录区记录了该区段的启始与结束的柱面号
码。
其实所谓的“分区”只是针对那个64 Bytes的分区表进行设置而已！
硬盘默认的分区表仅能写入四组分区信息
这四组分区信息我们称为主要（Primary）或延伸（Extended）分区
分区的最小单位“通常”为柱面（cylinder）
当系统要写入磁盘时，一定会参考磁盘分区表，才能针对某个分区进行数据的处理

==== 如何建立多于4个的分区？ ====
用扩展分区（延伸分区）实际上延伸分区并不是只占一个区块，而是会分佈在每个分区的最前面几个扇区来记载分区信息的。
 延伸分区的目的是使用额外的扇区来记录分区信息，延伸分区本身并不能被拿来格式化。
分区号1,4都被主分区，扩展分区占了，所以逻辑分区只能从5开始。

主要分区与延伸分区最多可以有四笔（硬盘的限制）
延伸分区最多只能有一个（操作系统的限制）
逻辑分区是由延伸分区持续切割出来的分区；
能够被格式化后，作为数据存取的分区为主要分区与逻辑分区。延伸分区无法格式化；
逻辑分区的数量依操作系统而不同，在Linux系统中SATA硬盘已经可以突破63个以上的分区限制；

如果延伸分区被破坏，所有逻辑分区将会被删除。 因为逻辑分区的信息都记录
在延伸分区里面嘛！主分区与逻辑分区 民不能直接合并

===== GPT =====
为什么还要有这种呢？因为MBR中的分区表只能保存16Bytes的数据，所以支持的一个分区的容量有限，不得超过2.2T，现在的硬盘越来越大，几十T的硬盘划分的时候要划分很多分区，管理很麻烦，
另外引导记录什么的放在mbr中，因为mbr的空间也有限，导致引导程序不能太大，且损坏整个硬盘就报废了。解决这些问题，发明了GPT分区类型。

==== LBA 逻辑块地址 ====
GPT分区类型中的最小单位不是扇区了，是lba，并且对于应mba的功能的空间用了34个开始的lba，lba缺省大小是512k，但是因为现在磁盘都很大，也开始有4k一个的划分方法。
它足够大，所以可以支持的分区表就可以很多，也可以很大。
另外，在磁盘的最后磁道上不家这个引导分区的备份。毕竟了因主引导分区出错了，整个磁盘废掉。

每个 LBA 都可以纪录 4 笔分区纪录，所以在默认的情况下，总共可以有 4*32 = 128 笔分区纪
录喔
现在 GPT 分区默认可以提供多达 128 笔纪录，而在 Linux 本身的核心设备纪录中，针对单一磁盘来说，虽然过去最多只
能到达 15 个分区，不过由于 Linux kernel 通过 udev 等方式的处理，现在 Linux 也已经没有这个限制在了！ 此外，GPT 分区已经没
有所谓的主、延伸、逻辑分区的概念，既然每笔纪录都可以独立存在， 当然每个都可以视为是主分区！每一个分区都可以拿来格式
化使用喔！

====== GPT分区的软硬件支持程度 ======
linux内核支持了。
fdisk不支持。
