Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2018-07-09T16:27:07+08:00

====== 软件碰盘阵列 ======
Created 星期一 09 七月 2018

software RAID
Redundant Arrays of Inexpensive Disks, RAID
中文意思:容错式廉价磁盘阵列

===== 什么是RAID =====
 RAID 可以通
过一个技术（软件或硬件），将多个较小的磁盘整合成为一个较大的磁盘设备； 而这个较大的磁盘功能可不止是储存而已，他还具
有数据保护的功能呢

===== RAID等级概念 =====
整个 RAID 由于选择的等级 （level） 不同，而使得整合后的磁盘具有不同的功能，基本常见的 level 有这几
种[2]：
1. RAID-0 （等量模式, stripe）：性能最佳    ,        因为io被平均分配到多个硬盘上, 且总容量也大了,缺点是,一个盘坏了,所有文件都读不了了.
2. RAID-1 （映射模式, mirror）：完整备份, 让 同一份数据，完整的保存在n颗磁盘上头, 相当于容量也变成了1/n, 优点是任一盘坏了,数据都不会丢失. 但软raid会很慢.因为要复制n份,如果用硬的raid卡,因为有专门有io通道,性能尚可.  写的性能差,但读的性能比较快.因为可以多个盘并发读.
3. RAID 1+0，RAID 0+1  ,这种就是为了折中1,2方案, 先1模式,再组合成2模式, 或者先2模式,再组合在1模式,这样,数据安全有一定保证,且性能也可提高.   以上都是性能比较好的方式. 不需要软件计算.
4. RAID 5：性能与数据备份的均衡考虑,RAID-5 至少需要三颗以上的磁盘才能够组成这种类型的磁盘阵列。这种磁盘阵列的数据写入有点类似 RAID-0 ， 不过每
个循环的写入过程中 （striping），在每颗磁盘还加入一个同位检查数据 （Parity） ，这个数据会记录其他磁盘的备份数据， 用于当
有磁盘损毁时的救援  ,,, 
raid6 和5差不多,就是增加了一个可损毁的碰盘数量为2个.

===== Spare Disk：预备磁盘的功能： =====
事先有一个多的磁盘,作为预备, 当某一个盘坏了,这个就顶上.    这种对付不支持热插拔的机器,  由软件系统自动切换,  如果支持热插拔, 就无所谓,直接拿一块新的把老的换下来就行了. 但也有好处就是比较自动化. 不依赖人工操作.

===== 磁盘阵列的优点 =====
1. 数据安全与可靠性：指的并非网络信息安全，而是当硬件 （指磁盘） 损毁时，数据是否还能够安全的救援或使用之意；
2. 读写性能：例如 RAID 0 可以加强读写性能，让你的系统 I/O 部分得以改善；
3. 容量：可以让多颗磁盘组合起来，故单一文件系统可以有相当大的容量。


===== 各模式对比: =====
项目 RAID0 RAID1 RAID10 RAID5 RAID6
最少磁盘数 2 2 4 3 4
最大容错磁盘数（1） 无 n-1 n/2 1 2
数据安全性（1） 完全没有 最佳 最佳 好 比 RAID5 好
理论写入性能（2） n 1 n/2 <n-1 <n-2
理论读出性能（2） n n n <n-1 <n-2
可用容量（3） n 1 n/2 n-1 n-2
一般应用 强调性能但数据不
重要的环境 数据与备份 服务器、 用 云系统常 数据与备份 数据与备份

如果用用云环境 ,用raid10合适,  如果主要是扩展容量和一定的安全性,用raid6

===== 硬件磁盘阵列 =====
即将算法都做到硬件芯片上,并提供多个磁盘接口,不耗费cpu算力,      性能比较好. 但价格较高.
但因为现代cpu的性能都很强,且支持并发,所以现在软的磁盘阵列也是不错的选择.

===== 软件磁盘陈列 =====

mdadm 

这套软件会以 partition 或 disk 为磁盘的单位
硬件磁盘阵列在 Linux 下面看起来就是一颗实际的大磁盘，因此硬件磁盘阵列的设备文件名为
/dev/sd[a-p] ，因为使用到 SCSI 的模块之故。至于软件磁盘阵列则是系统仿真的，因此使用的设备文件名是系统的设备文件， 文件
名为 /dev/md0, /dev/md1...，两者的设备文件名并不相同

Intel 的南桥附赠的磁盘阵列功能，在 windows 下面似乎是完整的磁盘阵列，但是在 Linux 下面则被视为是软件磁盘阵列的一种！ 因此
如果你有设置过 Intel 的南桥芯片磁盘阵列，那在 Linux 下面反而还会是 /dev/md126, /dev/md127 等等设备文件名， 而他的分区竟
然是 /dev/md126p1, /dev/md126p


