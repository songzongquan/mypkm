Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2018-07-04T13:58:01+08:00

====== 用户身份切换 ======
Created 星期三 04 七月 2018

因为为了安全考虑,平时一般用普通用户工作,只有在必要的时候才会切换到root
下面讲如果在两账号之间切换

===== 方式一:   su - =====
- 表示使用 root的环境变量配置. 否则仍是用的当前用户的. 

切换root是需要root密码,  root切换其它用户不需要密码.

==== 命令方式 ====
[root@study ~]# su [-lm] [-c 指令] [username]
选项与参数：
- ：单纯使用 - 如“ su - ”代表使用 login-shell 的变量文件读取方式来登陆系统；
若使用者名称没有加上去，则代表切换为 root 的身份。
-l ：与 - 类似，但后面需要加欲切换的使用者帐号！也是 login-shell 的方式。
-m ：-m 与 -p 是一样的，表示“使用目前的环境设置，而不读取新使用者的配置文件”
-c ：仅进行一次指令，所以 -c 后面可以加上指令喔！


===== 方式二 sudo  cmdname =====

切换root也不需要root密码,安全,只需要自已的密码.
但是要在/etc/sudoer中有此账号才能用.
编辑sudoer只能用virtual

==== 调用方法 ====
[root@study ~]# sudo [-b] [-u 新使用者帐号]
选项与参数：
-b ：将后续的指令放到背景中让系统自行执行，而不与目前的 shell 产生影响
-u ：后面可以接欲切换的使用者，若无此项则代表切换身份为 root 。

这个适用于不想登录和使用shell的用户的切换.

==== 用visudo来编辑sudoer文件 ====

使用者帐号 登陆者的来源主机名称=（可切换的身份） 可下达的指令
root ALL=（ALL） ALL <==这是默认值

1. 可以单独给一个用户设置 
2. 可以设定一个组具有sudo权限
3. 可以指定特定的可以下达的指令
4. 下次询问密码的时间间隔支持
5. 支持 用别名来简化设置,如不需要为任意多个用户每用户设置一行.



