Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2018-04-30T10:40:52+08:00

====== 文件系统 ======
Created 星期一 30 四月 2018

===== 主要概念 =====
文件系统是指将磁盘空间以按操作系统可识别的格式进行“格式化”。方便操作系统管理与读写磁盘
常见的文件系统有windows的FAT(FAT16), windows 2000 的NTFS， linux的ext2

过去，一个分区一般只有一个文件系统，现在有了raid、lvm技术，一个分区可以有多个文件系统，一个文件系统也可能跨多个分区 

==== 文件系统的数据结构 ====
那么文件系统是如何运行的呢?这与操作系统的文件数据有关。较新的操作系统的文件数据除了文件实际内容外, 通常
含有非常多的属性,例如 Linux 操作系统的文件权限(rwx )与文件属性(拥有者、群组、时间参数等)。 文件系统通常会将这两部
份的数据分别存放在不同的区块,权限与属性放置到 inode 中,至于实际数据则放置到 data block 区块中。 另外,还有一个超级区
块 (superblock) 会记录整个文件系统的整体信息,包括 inode 与 block 的总量、使用量、剩余量等。
每个 inode 与 block 都有编号,至于这三个数据的意义可以简略说明如下:
superblock:记录此 filesystem 的整体信息,包括inode/block的总量、使用量、剩余量, 以及文件系统的格式与相关信息等;
inode:记录文件的属性,一个文件占用一个inode,同时记录此文件的数据所在的 block 号码;
block:实际记录文件的内容,若文件太大时,会占用多个 block 。

==== inode的内容 ====
访问权限信息民
属主、组信息
访问时间 ，创建时间 
。。。

==== block大小的影响 ====
有1k，2k，4k三种
块越大，文件小，容易浪费 空间
块太小，易造成io访问性能。
在格式化时选定，以后就不能变了，要根据实际需求来选择

==== 磁盘碎片与重组 ====
文件存取多次后，可能block分布太分散，导致io变慢。重组就是将它们尽可能放在位置接近的地方
提高io效率。

==== ext2 与fat性能比较 ====
ext2是索引型文件系统，在inode中保存了所有block的位置，访问文件内容时可以方便一次读取。比较快。
fat是链式文件系统，它的block保存着下一个block的地址。要想读后面的内容必须先读取前面的内容。所以比较 慢。




